import{S as $e,i as Se,s as qe,e as w,t as U,k as S,c as O,a as T,h as x,d as k,m as q,b as p,K as ce,g as oe,J as c,j as Ae,L as B,M as F,N as Ie,O as K,n as he,P as Re,Q as ze}from"../chunks/index-1eba54bd.js";var Q={};Q.fetch=fetch;Q.URL=URL;Q.btoa=btoa;var J={};J.data=Symbol("data");J.headers=Symbol("headers");J.status=Symbol("status");var Pe={};Pe.queryString=function(n){if(!Array.isArray(n)&&Object(n)!==n)return"";var e=[];return t(!1,n),"?"+e.join("&");function t(r,a){var s="",o="";if(r&&(s=r+"[",o="]"),Array.isArray(a))for(var u=0;u<a.length;u++)h(u+"",a[u]);else if(Object(a)===a)for(var i in a)h(i,a[i]);else e.push(r+"="+encodeURIComponent(a));function h(y,l){t(s+encodeURIComponent(y)+o,l)}}};var X=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ve=function(){function n(e,t){var r=[],a=!0,s=!1,o=void 0;try{for(var u=e[Symbol.iterator](),i;!(a=(i=u.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(h){s=!0,o=h}finally{try{!a&&u.return&&u.return()}finally{if(s)throw o}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Le=function(){function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var W=Q,xe=W.http,Te=W.https,ne=W.URL,Ne=W.fetch,Z=J,De=Pe,ae=Object.freeze(new ne("https://danbooru.donmai.us/")),ue=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ue(this,n),this.auth(e)}return Le(n,[{key:"auth",value:function(t){var r=M(this);if(typeof t!="undefined"){var a=void 0,s=void 0;if(t&&/^https?:\/\//.test(t)){var o=new ne(t);a=o.username,s=o.password,Object.assign(o,{username:"",password:"",hash:"",search:"",pathname:(o.pathname||"").replace(/\/*$/,"/")}),o.href!==r.url.href&&(o.protocol==="http:"?r.module=xe:r.module=Te,o.href!==ae.href?r.url=o:r.url=ae)}else{var u=/^(.*?):(.*)$/.exec(t);if(u){var i=ve(u,3);a=i[1],s=i[2]}}a&&s?(r.authParams={login:a,api_key:s},r.username=a):t||(delete r.authParams,delete r.username)}return r.username}},{key:"url",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return new ne(t.toString().replace(/^\/*/,""),M(this).url)}},{key:"request",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=M(this),a=r.module,s=t.method,o=t.path,u=t.body,i=this.url(o),h=t.headers,y=h===void 0?{}:h;if(a){var l=a.request({protocol:i.protocol,hostname:i.hostname,port:i.port,method:s,path:i.pathname+i.search,headers:y});return u?l.end(u):l.end(),["request",l]}else return["fetch",Ne(i.href,{method:s,headers:y,body:u})]}},{key:"json",value:function(t){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,o){var u=a.method,i=a.query,h=a.body,y=a.headers,l=y===void 0?{}:y,E=M(r),d=E.authParams;d&&(i?i=X({},d,i):!u||u==="GET"?i=d:h?h=X({},d,h):h=d);var _=h&&JSON.stringify(h);_&&(l=X({},l,{"content-type":"application/json"}));var $={method:u,headers:l,path:t+".json"+De.queryString(i),body:_},m=r.request($),A=ve(m,2),I=A[0],N=A[1];switch(I){case"request":N.on("error",o).on("response",function(P){var R="",L=P.statusCode,D=P.headers;P.setEncoding("utf8").on("data",function(z){return R+=z}).on("end",function(){return s({data:R,status:L,headers:D})})});break;case"fetch":N.then(function(P){var R=P.status,L=P.headers;return P.text().then(function(D){return{data:D,status:R,headers:L}})}).then(s,o);break}}).then(function(s){var o,u=void 0;try{u=JSON.parse(s.data)}catch(i){u=i}return Object.assign(u,(o={},Y(o,Z.status,s.status),Y(o,Z.data,s.data),Y(o,Z.headers,s.headers),o)),u})}},{key:"get",value:function(t,r){return this.json(t,{query:r})}},{key:"post",value:function(t,r){return this.json(t,{method:"POST",body:r})}},{key:"put",value:function(t,r){return this.json(t,{method:"PUT",body:r})}},{key:"delete",value:function(t,r){return this.json(t,{method:"DELETE",body:r})}}]),n}();function M(n){var e=M.map||(M.map=new WeakMap);if(e.has(n))return e.get(n);var t={url:ae,module:Te};return e.set(n,t),t}var Be=function(){function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Me(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ge(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Je(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Ve=ue,Fe=function(n){Je(e,n);function e(){return Me(this,e),Ge(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Be(e,[{key:"favorites",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.get("favorites",r)}},{key:"favorites_create",value:function(r){return this.post("favorites",{post_id:r})}},{key:"favorites_destroy",value:function(r){return this.delete("favorites/"+r)}}]),e}(Ve),Ke=function(){function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Qe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function We(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function He(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Xe=ue,Ye=function(n){He(e,n);function e(){return Qe(this,e),We(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Ke(e,[{key:"posts",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Object(r)===r?this.get("/posts",r):this.get("/posts/"+r)}},{key:"posts_update",value:function(r,a){return this.put("/posts/"+r,{post:a})}},{key:"posts_revert",value:function(r,a){return this.put("/posts/"+r+"/revert",{version_id:a})}},{key:"posts_copyNotes",value:function(r,a){return this.put("/posts/"+r+"/copy_notes",{other_post_id:a})}},{key:"posts_markAsTranslated",value:function(r,a){return this.put("/posts/"+r+"/mark_as_translated",{post:a})}}]),e}(Xe),Ze=[Fe,Ye],Ce=function(){function n(e,t){var r=[],a=!0,s=!1,o=void 0;try{for(var u=e[Symbol.iterator](),i;!(a=(i=u.next()).done)&&(r.push(i.value),!(t&&r.length===t));a=!0);}catch(h){s=!0,o=h}finally{try{!a&&u.return&&u.return()}finally{if(s)throw o}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function et(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function rt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var nt=Ze,ie=J,at=ue,V=function(n){rt(e,n);function e(){return et(this,e),tt(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return e}(at),C=!0,de=!1,pe=void 0;try{for(var ee=nt[Symbol.iterator](),ye;!(C=(ye=ee.next()).done);C=!0){var ot=ye.value,ut=ot.prototype,it=Object.getOwnPropertyDescriptors(ut),te=!0,_e=!1,be=void 0;try{for(var re=Object.entries(it)[Symbol.iterator](),me;!(te=(me=re.next()).done);te=!0){var st=me.value,ge=Ce(st,2),we=ge[0],Oe=ge[1];we==="constructor"||typeof Oe.value!="function"||Object.defineProperty(V.prototype,we,Oe)}}catch(n){_e=!0,be=n}finally{try{!te&&re.return&&re.return()}finally{if(_e)throw be}}}}catch(n){de=!0,pe=n}finally{try{!C&&ee.return&&ee.return()}finally{if(de)throw pe}}V.data=ie.data;V.headers=ie.headers;V.status=ie.status;var lt=V;function je(n,e,t){const r=n.slice();return r[9]=e[t],r[11]=t,r}function ke(n){let e,t,r,a=n[11]+1+"",s,o,u,i=n[9].tags+"",h,y,l,E;return{c(){e=w("div"),t=w("div"),r=w("p"),s=U(a),o=S(),u=w("p"),h=U(i),y=S(),l=w("img"),this.h()},l(d){e=O(d,"DIV",{class:!0});var _=T(e);t=O(_,"DIV",{});var $=T(t);r=O($,"P",{class:!0});var m=T(r);s=x(m,a),m.forEach(k),o=q($),u=O($,"P",{});var A=T(u);h=x(A,i),A.forEach(k),$.forEach(k),y=q(_),l=O(_,"IMG",{src:!0,width:!0,alt:!0}),_.forEach(k),this.h()},h(){p(r,"class","text-2xl"),ce(l.src,E=n[9].url)||p(l,"src",E),p(l,"width","420"),p(l,"alt","cunny"),p(e,"class","flex flex-col items-center rounded-xl bg-slate-100 p-2 text-center shadow-xl")},m(d,_){oe(d,e,_),c(e,t),c(t,r),c(r,s),c(t,o),c(t,u),c(u,h),c(e,y),c(e,l)},p(d,_){_&8&&i!==(i=d[9].tags+"")&&Ae(h,i),_&8&&!ce(l.src,E=d[9].url)&&p(l,"src",E)},d(d){d&&k(e)}}}function Ee(n){let e,t;return{c(){e=w("p"),t=U("No cunny yet")},l(r){e=O(r,"P",{});var a=T(e);t=x(a,"No cunny yet"),a.forEach(k)},m(r,a){oe(r,e,a),c(e,t)},d(r){r&&k(e)}}}function ft(n){let e,t,r,a,s,o,u,i,h,y,l,E,d,_,$,m,A,I,N,P,R,L,D,z=n[3],b=[];for(let v=0;v<z.length;v+=1)b[v]=ke(je(n,z,v));let g=!n[3].length&&Ee();return{c(){e=w("main"),t=w("form"),r=w("label"),a=U("page"),s=S(),o=w("input"),u=S(),i=w("label"),h=U("take"),y=S(),l=w("input"),E=S(),d=w("label"),_=U("cunny"),$=S(),m=w("input"),A=S(),I=w("button"),N=U("Get Cunny"),P=S();for(let v=0;v<b.length;v+=1)b[v].c();R=S(),g&&g.c(),this.h()},l(v){e=O(v,"MAIN",{class:!0});var j=T(e);t=O(j,"FORM",{class:!0});var f=T(t);r=O(f,"LABEL",{for:!0});var G=T(r);a=x(G,"page"),G.forEach(k),s=q(f),o=O(f,"INPUT",{type:!0,placeholder:!0,class:!0}),u=q(f),i=O(f,"LABEL",{for:!0});var se=T(i);h=x(se,"take"),se.forEach(k),y=q(f),l=O(f,"INPUT",{type:!0,placeholder:!0,class:!0}),E=q(f),d=O(f,"LABEL",{for:!0});var le=T(d);_=x(le,"cunny"),le.forEach(k),$=q(f),m=O(f,"INPUT",{type:!0,placeholder:!0,class:!0}),A=q(f),I=O(f,"BUTTON",{action:!0,class:!0});var fe=T(I);N=x(fe,"Get Cunny"),fe.forEach(k),f.forEach(k),P=q(j);for(let H=0;H<b.length;H+=1)b[H].l(j);R=q(j),g&&g.l(j),j.forEach(k),this.h()},h(){p(r,"for",""),p(o,"type","number"),p(o,"placeholder","page"),p(o,"class","svelte-z20uzi"),p(i,"for",""),p(l,"type","number"),p(l,"placeholder","take"),p(l,"class","svelte-z20uzi"),p(d,"for",""),p(m,"type","text"),p(m,"placeholder","cunny"),p(m,"class","svelte-z20uzi"),p(I,"action","submit"),p(I,"class","svelte-z20uzi"),p(t,"class","flex items-center gap-2 py-8"),p(e,"class","flex flex-col items-center justify-center")},m(v,j){oe(v,e,j),c(e,t),c(t,r),c(r,a),c(t,s),c(t,o),B(o,n[0]),c(t,u),c(t,i),c(i,h),c(t,y),c(t,l),B(l,n[1]),c(t,E),c(t,d),c(d,_),c(t,$),c(t,m),B(m,n[2]),c(t,A),c(t,I),c(I,N),c(e,P);for(let f=0;f<b.length;f+=1)b[f].m(e,null);c(e,R),g&&g.m(e,null),L||(D=[F(o,"input",n[5]),F(l,"input",n[6]),F(m,"input",n[7]),F(t,"submit",Ie(n[4]))],L=!0)},p(v,[j]){if(j&1&&K(o.value)!==v[0]&&B(o,v[0]),j&2&&K(l.value)!==v[1]&&B(l,v[1]),j&4&&m.value!==v[2]&&B(m,v[2]),j&8){z=v[3];let f;for(f=0;f<z.length;f+=1){const G=je(v,z,f);b[f]?b[f].p(G,j):(b[f]=ke(G),b[f].c(),b[f].m(e,R))}for(;f<b.length;f+=1)b[f].d(1);b.length=z.length}v[3].length?g&&(g.d(1),g=null):g||(g=Ee(),g.c(),g.m(e,null))},i:he,o:he,d(v){v&&k(e),Re(b,v),g&&g.d(),L=!1,ze(D)}}}function ct(n,e,t){const r=new lt;let a=1,s=20,o="",u=[];async function i(){t(3,u=await r.posts({tags:o,page:a,limit:s}).then(E=>E.map(d=>({tags:d.tag_string,url:d.file_url}))))}function h(){a=K(this.value),t(0,a)}function y(){s=K(this.value),t(1,s)}function l(){o=this.value,t(2,o)}return[a,s,o,u,i,h,y,l]}class vt extends $e{constructor(e){super(),Se(this,e,ct,ft,qe,{})}}export{vt as default};
